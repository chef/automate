syntax = "proto3";

package chef.automate.api.user_settings;
option go_package = "github.com/chef/automate/api/external/user_settings";

import "google/api/annotations.proto";
import "external/annotations/iam/annotations.proto";
import "google/protobuf/empty.proto";

// UserSettings allows accessing of user settings
service UserSettingsService {
	//
	// Global
	//

	// GetUserSettings returns all of the preferences for a given user
	rpc GetUserSettings(GetUserSettingsRequest) returns (GetUserSettingsResponse) {
		option (google.api.http).get = "/api/v0/user-settings/{user.name}/{user.connector}";
		option (chef.automate.api.iam.policy) = {
			resource: "global:userSettings:{user.name}:{user.connector}"
			action: "global:userSettings:get"
		};
	};
}

message User {
	string name = 1;
	string connector = 2;
}

message GetUserSettingsRequest{
	// The user to get settings for
	User user = 1;
}

message GetUserSettingsResponse {
	User user = 1;
	map<string, UserSettingValue> settings = 2;
}

message UserSettingValue {
	// Default value for this setting.
	string default_value = 1;
	// Value for this setting.
	string value = 2;
	// Enabled
	bool enabled = 3;
}
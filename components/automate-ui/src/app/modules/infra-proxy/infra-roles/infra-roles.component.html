<section class="infra-roles">
  <chef-loading-spinner *ngIf="rolesListLoading" size="50"></chef-loading-spinner>
  <app-empty-state *ngIf="authFailure" moduleTitle="roles" (resetKeyRedirection)="resetKeyTabRedirection($event)"></app-empty-state>
  <app-create-infra-role-modal [openEvent]="openRoleModal"
  [rolesList]="roles" [serverId]="serverId" [orgId]="orgId"></app-create-infra-role-modal>
  <ng-container *ngIf="!rolesListLoading && !authFailure">
    <chef-toolbar>
      <chef-button primary (click)="openCreateModal()">Create Role</chef-button>
    </chef-toolbar>
    <chef-table>
      <chef-thead>
        <chef-tr>
          <chef-th>Role Name</chef-th>
          <chef-th>Description</chef-th>
          <chef-th>Environments</chef-th>
        </chef-tr>
      </chef-thead>
      <chef-tbody>
        <chef-tr *ngFor="let role of roles">
          <chef-td>
            <a [routerLink]="['/infrastructure','chef-servers', serverId, 'organizations', orgId, 'roles', role.name]">{{ role.name }}</a>
          </chef-td>
          <chef-td>{{ role.description === '' ?  '...' : role.description }}</chef-td>
          <chef-td>{{ role.environments.join(", ") }}</chef-td>
        </chef-tr>
      </chef-tbody>
    </chef-table>
  </ng-container>
</section>

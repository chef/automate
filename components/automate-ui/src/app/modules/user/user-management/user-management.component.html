<div class="content-container">
  <div class="container">
    <main>
      <app-delete-object-modal
        [visible]="deleteModalVisible"
        objectNoun="user"
        [objectName]="userToDelete?.name"
        (close)="closeDeleteModal()"
        (deleteClicked)="deleteUser()"
        objectAction="Delete">
      </app-delete-object-modal>
      <chef-page-header>
        <chef-heading>Users</chef-heading>
        <chef-subheading>Chef Automate only displays local users.</chef-subheading>
      </chef-page-header>
  
      <chef-modal [visible]="createModalVisible"
        (closeModal)="closeCreateModal()">
        <h2 slot="title"> Create User </h2>
        <div class="flex-container">
          <app-user-form 
            [createUserForm]="createUserForm"
            [conflictErrorEvent]="conflictErrorEvent"
            [passwordErrorEvent]="passwordErrorEvent">
          </app-user-form>
          <div>
            <chef-button primary (click)="createUser()" [disabled]="!createUserForm.valid"
              tabindex="2" data-cy="save-user">
              <ng-container *ngIf="!creatingUser">
                Create User
              </ng-container>
              <ng-container *ngIf="creatingUser">
                <chef-loading-spinner></chef-loading-spinner>
                <span>Creating...</span>
              </ng-container>
            </chef-button>
            <chef-button type="reset" tertiary (click)="closeCreateModal()" tabindex="-1">Cancel</chef-button>
          </div>
        </div>
      </chef-modal>
  
      <section class="page-body">
        <app-user-table
          [addButtonText]="addButtonText"
          [removeText]="removeText"
          [users]="users"
          [baseUrl]="baseUrl"
          [showTable]="showUsersTable()"
          [showEmptyMessage]="showEmptyStateMessage()"
          (addClicked)="openCreateModal()"
          (removeClicked)="startUserDelete($event)">
        </app-user-table>
      </section>
    </main>
  </div>
</div>
